@page "/event/edit/{id}"
<EditForm Model="EventViewModel" OnValidSubmit="Success">
	<FluentValidator></FluentValidator>
	<ValidationSummary />
	<Card>
		<CardHeader><CardTitle Size="5">Evento</CardTitle></CardHeader>
		<CardBody>
			<Row>
				<Column ColumnSize="ColumnSize.Is6">
					<TextEdit Placeholder="Nome evento" @bind-Text="EventViewModel.Name" />
					<ValidationMessage For="@(() => EventViewModel.Name)" />
				</Column>
				<Column ColumnSize="ColumnSize.Is6">
					<Addons>
						<Addon AddonType="AddonType.Body"><TextEdit Placeholder="Acquista biglietto" @bind-Text="EventViewModel.BuyTicket" /></Addon>
						<Addon AddonType="AddonType.End"><AddonLabel><Icon Name="@("event_seat")"></Icon></AddonLabel></Addon>
					</Addons>
					<ValidationMessage For="@(() => EventViewModel.BuyTicket)" />
				</Column>
			</Row>
			<Row>
				<Column ColumnSize="ColumnSize.Is4">
					<DateEdit TValue="DateTime" @bind-Date="@EventViewModel.StartDate" />
					<ValidationMessage For="@(() => EventViewModel.StartDate)" />
				</Column>
				<Column ColumnSize="ColumnSize.Is2">
					<TimeEdit TValue="TimeSpan" Time="StartHour" />
					@*<ValidationMessage For="@(() => EventViewModel.StartDate)" />*@
				</Column>
				<Column ColumnSize="ColumnSize.Is4">
					<DateEdit TValue="DateTime" @bind-Date="@EventViewModel.EndDate" />
					<ValidationMessage For="@(() => EventViewModel.EndDate)" />
				</Column>
				<Column ColumnSize="ColumnSize.Is4">
					<TimeEdit TValue="TimeSpan" Time="EndHour" />
					@*<ValidationMessage For="@(() => EventViewModel.EndDate)" />*@
				</Column>
			</Row>
		</CardBody>
	</Card>
	<Card>
		<CardHeader><CardTitle Size="5">Call for speaker</CardTitle></CardHeader>
		<CardBody>
			<Row>
				<Column ColumnSize="ColumnSize.Is12">
					<TextEdit Placeholder="Nome evento" @bind-Text="EventViewModel.CFP.Url" />
					<ValidationMessage For="@(() => EventViewModel.CFP.Url)" />
				</Column>
			</Row>
			<Row>
				<Column ColumnSize="ColumnSize.Is6">
					<DateEdit TValue="DateTime" @bind-Date="@EventViewModel.CFP.StartDate" />
					<ValidationMessage For="@(() => EventViewModel.CFP.StartDate)" />
				</Column>
				<Column ColumnSize="ColumnSize.Is6">
					<DateEdit TValue="DateTime" @bind-Date="@EventViewModel.CFP.EndDate" />
					<ValidationMessage For="@(() => EventViewModel.CFP.EndDate)" />
				</Column>
			</Row>
		</CardBody>
	</Card>
	<Card>
		<CardHeader><CardTitle Size="5">Community</CardTitle></CardHeader>
		<CardBody>
			<Row>
				<Column ColumnSize="ColumnSize.Is12">
					<TextEdit Placeholder="Nome evento" @bind-Text="EventViewModel.CFP.Url" />
					<ValidationMessage For="@(() => EventViewModel.Community.Name)" />
				</Column>
			</Row>
		</CardBody>
	</Card>
	<Row>
		<Column ColumnSize="ColumnSize.Is6">
			<FileEdit Changed="@FilesReady" Written="@OnWritten" Progressed="@OnProgressed" Filter=".jpg, .png, .gif"></FileEdit>
		</Column>
		<Column ColumnSize="ColumnSize.Is6">
			@if (EventViewModel.Logo != null)
			{
				<Figure Size="FigureSize.Is256x256" style="text-align:center">
					<FigureImage Source="@LinkViewModel.GetImageMedium(EventViewModel.Logo).ToString()" AlternateText="@(EventViewModel.Community?.Name)" Style="border-color:black; border:2px;" />
					<FigureCaption>@EventViewModel.Community?.Name</FigureCaption>
				</Figure>
			}
		</Column>
	</Row>
	<Row>
		<Column ColumnSize="ColumnSize.Is12" style="text-align: center">
			<Button Type="ButtonType.Submit" Color="Color.Primary"><Icon Name="@("save")" /> Save</Button>
		</Column>
	</Row>
</EditForm>


	@*<div class="mat-layout-grid">
		<div class="mat-layout-grid-inner">
			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				<MatTextField Label="Nome evento" @bind-Value="EventViewModel.Name" FullWidth="true" />
				<ValidationMessage For="@(() => EventViewModel.Name)" />
			</div>
			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				<MatTextField Label="Acquista biglietto" Icon="@MatIconNames.Event_seat" IconTrailing="true" @bind-Value="EventViewModel.BuyTicket" FullWidth="true" />
				<ValidationMessage For="@(() => EventViewModel.BuyTicket)" />
			</div>
			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				<MatDatePicker Label="Start Date" @bind-Value="EventViewModel.StartDate" FullWidth="true" EnableTime="true" Enable24hours="true" />
				<ValidationMessage For="@(() => EventViewModel.StartDate)" />
			</div>
			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				<MatDatePicker Label="End Date" @bind-Value="EventViewModel.EndDate" FullWidth="true" EnableTime="true" Enable24hours="true" />
				<ValidationMessage For="@(() => EventViewModel.EndDate)" />
			</div>

			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				<FileEdit OnChange="@FilesReady" Written="@OnWritten" Progressed="@OnProgressed" Label="Carica l'immagine dell'evento" Filter=".jpg, .png, .gif"></FileEdit>
			</div>
			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
				@if (EventViewModel.Logo != null)
				{
					<img src="@LinkViewModel.GetImageMedium(EventViewModel.Logo).ToString()" style="text-align:center" />
				}
			</div>


			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
				<div class="mat-layout-grid-inner mat-elevation-z2 mat-padding">
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
						<MatSubtitle2>Call for speaker</MatSubtitle2>
					</div>
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
						<MatTextField Label="Call for speaker url" @bind-Value="EventViewModel.CFP.Url" Icon="@MatIconNames.Share" IconTrailing="true" FullWidth="true" />
					</div>
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
						<MatDatePicker Label="Start Date" @bind-Value="EventViewModel.CFP.StartDate" FullWidth="true" />
						<ValidationMessage For="@(() => EventViewModel.CFP.StartDate)" />
					</div>
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-6">
						<MatDatePicker Label="End Date" @bind-Value="EventViewModel.CFP.EndDate" FullWidth="true" />
						<ValidationMessage For="@(() => EventViewModel.CFP.EndDate)" />
					</div>
				</div>
			</div>

			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
				<div class="mat-layout-grid-inner mat-elevation-z2 mat-padding">
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
						<MatSubtitle2>Community</MatSubtitle2>
					</div>
					<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12">
						<CommunitySelect @bind-CommunitySelected=EventViewModel.Community.ShortName></CommunitySelect>
					</div>
				</div>
			</div>

			<div class="mat-layout-grid-cell mat-layout-grid-cell-span-12" style="text-align: center">
				<MatButton Icon="@MatIconNames.Save" Raised="true" Type="submit">Save</MatButton>
			</div>
		</div>
	</div>
</EditForm>*@