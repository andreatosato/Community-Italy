@page "/event/reports"
@inherits ComponentBase

<Row>
	<Column ColumnSize="ColumnSize.Is4">
		<DateEdit @bind-Date="Search.StartDate"></DateEdit>
	</Column>
	<Column ColumnSize="ColumnSize.Is4">
		<DateEdit @bind-Date="Search.EndDate"></DateEdit>
	</Column>
	<Column ColumnSize="ColumnSize.Is2">
		<Button Clicked="SearchEvents">Ricerca</Button>
	</Column>
	<Column ColumnSize="ColumnSize.Is2">
		<Button Clicked="Export">Export</Button>
	</Column>
</Row>

<Row>
	@foreach (var e in ReportLists)
	{
		<Column ColumnSize="ColumnSize.Is6">
			<Card>
				<CardImage Source="@LinkViewModel.GetImageMedium(e.Logo).ToString()" Alt="Placeholder image">
				</CardImage>
				<CardBody>
					<CardTitle Size="6">@e.Name</CardTitle>
					<CardText>
						<Button Clicked="@(() => OpenNewTabLink(e.BuyTicket))"><Icon Name="@IconAppName.EventSeat"></Icon></Button>


						<span>@e.StartDate.ToShortDateString()</span> - <span>@e.EndDate.ToShortDateString()</span>
					</CardText>
				</CardBody>
				<CardFooter>
					@if (e.Community.Managers != null)
					{
						@foreach (var manager in e.Community.Managers)
						{
							<Button Clicked="@(() => OpenManagers(manager))">
								<Icon Name="@IconAppName.PersonPin"></Icon> @manager.Name
							</Button>
						}
					}
					<Button Clicked="@(() => OpenNewTabLink(e.Community.WebSite.ToString()))" Disabled="@(e.Community.WebSite == null)">
						<Icon Name="@IconAppName.Web"></Icon> Community
					</Button>
				</CardFooter>
			</Card>
		</Column>
	}
</Row>


<Modal @ref="personRef">
	<ModalBackdrop />
	<ModalContent IsCentered="true" Size="ModalSize.ExtraLarge">
		<ModalHeader>
			<ModalTitle>@ManagerSelected.Name @ManagerSelected.Surname</ModalTitle>
			<CloseButton Clicked="@Close" />
		</ModalHeader>
		<ModalBody Style="text-align:center">
			<img src="@LinkViewModel.GetImageMedium(ManagerSelected.Picture).ToString()" />
		</ModalBody>
		<ModalFooter>
			<Row>
				<Column ColumnSize="ColumnSize.Is4" Float="Float.Left">
					@if (!string.IsNullOrEmpty(MVP_Url))
					{
						<a href="@MVP_Url" target="_blank">
							<i class="fab fa-4x fa-microsoft" aria-hidden="true" style="color:darkblue"></i>
						</a>
					}
				</Column>
				<Column ColumnSize="ColumnSize.Is8" Float="Float.Right">
					<Button Color="Color.Primary" Clicked="@Close">Ok</Button>
				</Column>
			</Row>
		</ModalFooter>
	</ModalContent>
</Modal>